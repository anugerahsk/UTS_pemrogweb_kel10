<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rental Mobil</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    /* Modal CSS minimal supaya modal muncul dengan benar */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
      overflow: auto;
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 2rem;
      border-radius: 10px;
      max-width: 400px;
      position: relative;
    }
    .close {
      position: absolute;
      top: 10px; right: 20px;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      color: #aaa;
    }
    .close:hover {
      color: black;
    }
  </style>
</head>
<body>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="rental.html" class="active">Rental</a></li>
      <li><a href="pelayanan.html">Pelayanan</a></li>
      <li><a href="about.html">Tentang Kami</a></li>
      <li><a href="contact.html">Kontak</a></li>
    </ul>
  </nav>

  <div class="container">
    <h2>Daftar Mobil Tersedia</h2>

    <h3>Family Car</h3>
    <div class="mobil-list">
      <div class="mobil-item">
        <img src="fortuner.jpg" alt="Fortuner">
        <div class="mobil-info">
          <h2>Fortuner</h2>
          <h4>Rp 800.000 / hari</h4>
          <p>Gagah, nyaman, dan bertenaga.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>

      <div class="mobil-item">
        <img src="avanza.jpg" alt="Avanza">
        <div class="mobil-info">
          <h2>Avanza</h2>
          <h4>Rp 350.000 / hari</h4>
          <p>Irit, nyaman, cocok buat harian.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>

      <div class="mobil-item">
        <img src="inova.jpg" alt="Inova">
        <div class="mobil-info">
          <h2>Innova</h2>
          <h4>Rp 500.000 / hari</h4>
          <p>Luas, nyaman buat keluarga besar.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>
    </div>

    <h3>City Car</h3>
    <div class="mobil-list">
      <div class="mobil-item">
        <img src="ayla.jpg" alt="Ayla">
        <div class="mobil-info">
          <h2>Ayla</h2>
          <h4>Rp 300.000 / hari</h4>
          <p>Hemat bahan bakar, lincah di kota.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>

      <div class="mobil-item">
        <img src="etios.jpg" alt="Etios">
        <div class="mobil-info">
          <h2>Etios</h2>
          <h4>Rp 400.000 / hari</h4>
          <p>Stylish dan responsif.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>

      <div class="mobil-item">
        <img src="brio.jpg" alt="Brio">
        <div class="mobil-info">
          <h2>Brio</h2>
          <h4>Rp 250.000 / hari</h4>
          <p>Praktis & lega buat anak muda aktif.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>
    </div>

    <h3>Premium Car</h3>
    <div class="mobil-list">
      <div class="mobil-item">
        <img src="HIACE.jpg" alt="HIACE">
        <div class="mobil-info">
          <h2>Hiace Commuter</h2>
          <h4>Rp 1.700.000 / hari</h4>
          <p>Hemat bahan bakar, lincah di kota.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>

      <div class="mobil-item">
        <img src="Vellfire.jpeg" alt="VELLFIRE">
        <div class="mobil-info">
          <h2>Vellfire</h2>
          <h4>Rp 2.100.000 / hari</h4>
          <p>Stylish dan responsif.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>

      <div class="mobil-item">
        <img src="ALPHARD.jpg" alt="ALPHARD">
        <div class="mobil-info">
          <h2>Alphard</h2>
          <h4>Rp 2.700.000 / hari</h4>
          <p>Praktis & lega buat anak muda aktif.</p>
          <button>Sewa Sekarang</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Form -->
  <div id="sewaModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Form Penyewaan Mobil</h2>
      <form id="formSewa">
        <label for="nama">Nama:</label>
        <input type="text" id="nama" required>

        <label for="email">Email:</label>
        <input type="email" id="email" required placeholder="contoh@domain.com">

        <label for="tanggal">Tanggal Sewa:</label>
        <input type="date" id="tanggal" required>

        <label for="hari">Jumlah Hari:</label>
        <input type="number" id="hari" required min="1">

        <label for="mobil">Mobil:</label>
        <input type="text" id="mobil" readonly>

        <label for="harga">Harga per Hari (Rp):</label>
        <input type="number" id="harga" readonly>

        <label for="total">Total Harga (Rp):</label>
        <input type="number" id="total" readonly>

        <button type="submit">Kirim</button>
      </form>
    </div>
  </div>

  <script>
    const modal = document.getElementById("sewaModal"); // HARUS "sewaModal" bukan "SewaModal"
    const span = document.getElementsByClassName("close")[0]; // HARUS "close" bukan "Close"
    const hargaInput = document.getElementById("harga");
    const hariInput = document.getElementById("hari");
    const totalInput = document.getElementById("total");
    const mobilInput = document.getElementById("mobil");

    // Event klik tombol sewa
    document.querySelectorAll(".mobil-info button").forEach(button => {
      button.addEventListener("click", function () {
        const mobilNama = this.parentElement.querySelector("h2").innerText;
        const hargaText = this.parentElement.querySelector("h4").innerText;
        const harga = parseInt(hargaText.replace(/\D/g, ""));

        mobilInput.value = mobilNama;
        hargaInput.value = harga;
        totalInput.value = "";
        hariInput.value = "";
        modal.style.display = "block";
      });
    });

    // Tutup modal
    span.onclick = () => {
      modal.style.display = "none";
    };

    window.onclick = (event) => {
      if (event.target === modal) {
        modal.style.display = "none";
      }
    };

    // Hitung total harga otomatis saat input hari diubah
    hariInput.addEventListener("input", () => {
      const hari = parseInt(hariInput.value);
      const harga = parseInt(hargaInput.value);
      if (!isNaN(hari) && !isNaN(harga)) {
        totalInput.value = harga * hari;
      } else {
        totalInput.value = "";
      }
    });

    // Submit form dan redirect ke invoice.html
    document.getElementById("formSewa").addEventListener("submit", function (e) {
      e.preventDefault();

      const nama = document.getElementById("nama").value;
      const email = document.getElementById("email").value;
      const tanggal = document.getElementById("tanggal").value;
      const hari = document.getElementById("hari").value;
      const mobil = document.getElementById("mobil").value;
      const harga = document.getElementById("harga").value;
      const total = document.getElementById("total").value;

      if (!nama || !email || !tanggal || !hari || !mobil || !harga || !total) {
        alert("Mohon lengkapi form penyewaan!");
        return;
      }

      const url = `invoice.html?nama=${encodeURIComponent(nama)}&email=${encodeURIComponent(email)}&tanggal=${tanggal}&hari=${hari}&mobil=${mobil}&harga=${harga}&total=${total}`;
      
      window.location.href = url;
    });
  </script>

  <!-- Load Footer -->
  <div id="footer"></div>
  <script>
    fetch("footer.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("footer").innerHTML = data;
      })
      .catch(error => console.error("Gagal muat footer:", error));
  </script>
  
</body>
</html>